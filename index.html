<!DOCTYPE html>
<html lang="en">

<head>
    <!-- google tag (gtag.js) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.4/lottie.min.js"></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HGL07M90WG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-HGL07M90WG');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyyPlay</title>
    <meta content="SkyyPlay" property="og:title" />
    <meta name="keywords"
        content="free movies, free streaming, watch movies online, free tv shows, streaming service, watch movies free, online streaming, SkyyPlay, free movies online, free series online">
    <meta
        content="Click, watch, enjoy. SkyyPlay breaks down the paywall, ensuring that quality content is accessible to everyone."
        property="og:description" />

    <link rel="icon" type="image/x-icon" href="logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <!-- Add Orbitron font for SkyyPlay logo -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.10.3/cdn.min.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="sources.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        orbitron: ['Orbitron', 'monospace'],
                    },
                    colors: {
                        'dark': {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                            950: '#020617',
                        },
                        'purple': {
                            50: '#faf5ff',
                            100: '#f3e8ff',
                            200: '#e9d5ff',
                            300: '#d8b4fe',
                            400: '#c084fc',
                            500: '#a855f7',
                            600: '#9333ea',
                            700: '#7c3aed',
                            800: '#6b21a8',
                            900: '#581c87',
                            950: '#3b0764',
                        }
                    }
                },
            },
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #000000;
            color: #ffffff;
        }

        /* SkyyPlay logo styling with new font */
        .logo-text {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            letter-spacing: 2px;
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 50%, #c084fc 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 30px rgba(168, 85, 247, 0.5);
            animation: logoGlow 3s ease-in-out infinite alternate;
        }

        @keyframes logoGlow {
            0% {
                filter: drop-shadow(0 0 5px rgba(168, 85, 247, 0.3));
            }

            100% {
                filter: drop-shadow(0 0 15px rgba(168, 85, 247, 0.8));
            }
        }

        /* Enhanced animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        /* Apply animations to elements */
        .animate-fade-in-up {
            animation: fadeInUp 0.8s ease-out;
        }

        .animate-slide-in-left {
            animation: slideInLeft 0.8s ease-out;
        }

        .animate-slide-in-right {
            animation: slideInRight 0.8s ease-out;
        }

        .animate-pulse-subtle {
            animation: pulse 2s ease-in-out infinite;
        }

        /* Navbar animations */
        .navbar-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .navbar-item:hover {
            transform: translateY(-2px);
        }

        .section-nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            border-radius: 9999px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(168, 85, 247, 0.3);
            cursor: pointer;
        }

        .section-nav-button:hover {
            background-color: rgba(168, 85, 247, 0.8);
            border-color: rgba(168, 85, 247, 0.6);
            transform: translateY(-50%) scale(1.1);
        }

        .section-nav-button.prev {
            left: 0;
        }

        .section-nav-button.next {
            right: 0;
        }

        .overflow-container {
            position: relative;
            overflow: hidden;
        }

        /* Mobile Carousel Optimizations */
        @media (max-width: 768px) {
            .carousel-content-info {
                display: flex !important;
                flex-direction: column;
                padding: 1rem !important;
                align-items: center;
                text-align: center;
                justify-content: center;
            }

            /* Hide all content except title and watch button on mobile */
            .carousel-content-info .carousel-meta,
            .carousel-content-info .carousel-description,
            .carousel-content-info .carousel-info-button {
                display: none !important;
            }

            /* Hide the poster card completely on mobile */
            .carousel-poster-container {
                display: none !important;
            }

            /* Show only title and watch button */
            .carousel-title {
                font-size: 1.5rem !important;
                line-height: 1.2 !important;
                margin-bottom: 1rem !important;
            }

            .carousel-watch-button {
                display: inline-flex !important;
                margin-top: 0.5rem;
                padding: 0.5rem 1.5rem;
                font-size: 0.875rem;
                width: auto;
                justify-content: center;
            }

            /* Make the carousel container take full width on mobile */
            .carousel-grid {
                grid-template-columns: 1fr !important;
            }
        }

        /* Genre Results Scrollable Layout */
        .genre-results-container {
            position: relative;
            overflow: hidden;
            padding: 0 50px;
        }

        .genre-results-scroll {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            gap: 1rem;
            padding-bottom: 1rem;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .genre-results-scroll::-webkit-scrollbar {
            display: none;
        }

        .genre-results-item {
            flex: 0 0 auto;
            width: 150px;
        }

        @media (min-width: 640px) {
            .genre-results-item {
                width: 160px;
            }
        }

        @media (min-width: 768px) {
            .genre-results-item {
                width: 180px;
            }
        }

        .scroll-container {
            scroll-behavior: smooth;
            -ms-overflow-style: none;
            scrollbar-width: none;
            display: flex !important;
            flex-wrap: nowrap !important;
            overflow-x: auto !important;
        }

        .scroll-container::-webkit-scrollbar {
            display: none;
        }

        .category-container {
            -ms-overflow-style: none;
            scrollbar-width: none;
            display: flex !important;
            overflow-x: auto !important;
            scroll-behavior: smooth !important;
        }

        .category-container::-webkit-scrollbar {
            display: none;
        }

        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        @keyframes slide-down {
            0% {
                transform: translateY(-100%);
            }

            100% {
                transform: translateY(0);
            }
        }

        .animate-slide-down {
            animation: slide-down 0.5s ease-out;
        }

        @keyframes glow {
            0% {
                box-shadow: 0 0 5px rgba(168, 85, 247, 0.3);
            }

            50% {
                box-shadow: 0 0 20px rgba(168, 85, 247, 0.5);
            }

            100% {
                box-shadow: 0 0 5px rgba(168, 85, 247, 0.3);
            }
        }

        .search-container {
            position: relative;
            width: 256px;
        }

        .watchlist-btn-added svg {
            fill: #a855f7;
            color: #a855f7;
        }

        .watchlist-btn svg {
            transition: all 0.3s ease;
        }

        .watchlist-btn:hover svg {
            color: #a855f7;
        }

        .search-container::before {
            content: '';
            position: absolute;
            inset: -2px;
            background: radial-gradient(circle at var(--mouse-x, center) var(--mouse-y, center),
                    rgba(168, 85, 247, 0.5) 0%,
                    rgba(168, 85, 247, 0.2) 25%,
                    transparent 70%);
            border-radius: 9999px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            z-index: 0;
        }

        .search-container:hover::before,
        .search-container:focus-within::before {
            opacity: 1;
        }

        .search-input {
            position: relative;
            z-index: 1;
            transition: all 0.3s ease;
            padding-right: 5rem !important;
            background-color: rgba(15, 15, 15, 0.8);
            border: 1px solid rgba(168, 85, 247, 0.2);
        }

        .card-hover {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            background-color: rgba(15, 15, 15, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .card-hover::after {
            content: '';
            position: absolute;
            inset: -1px;
            background: linear-gradient(35deg,
                    rgba(168, 85, 247, 0.4),
                    rgba(168, 85, 247, 0),
                    rgba(139, 92, 246, 0.4));
            border-radius: 0.5rem;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .card-hover:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 30px -10px rgba(168, 85, 247, 0.3);
        }

        .card-hover:hover::after {
            opacity: 1;
        }

        .card-hover:hover .card-overlay {
            opacity: 1;
            background: linear-gradient(to top,
                    rgba(0, 0, 0, 0.95) 0%,
                    rgba(0, 0, 0, 0.8) 40%,
                    rgba(0, 0, 0, 0.2) 100%);
        }

        .card-overlay {
            opacity: 0;
            transition: all 0.4s ease;
            background: linear-gradient(to top,
                    rgba(0, 0, 0, 0.9) 0%,
                    rgba(0, 0, 0, 0.7) 50%,
                    rgba(0, 0, 0, 0.3) 100%);
        }

        .card-hover:hover img {
            filter: blur(2px) brightness(0.9);
            transition: all 0.4s ease;
        }

        .card-hover img {
            transition: all 0.4s ease;
        }

        .nav-link {
            position: relative;
            transition: all 0.3s ease;
            padding: 0.5rem 0;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            background: linear-gradient(to right, #a855f7, #7c3aed);
            transition: all 0.3s ease;
            transform: translateX(-50%);
        }

        .nav-link:hover {
            color: #a855f7;
            transform: translateY(-2px);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .glass-effect {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(168, 85, 247, 0.1);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
            animation: slideInDown 0.6s ease-out;
        }

        @keyframes slideInDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-animation {
            animation: modalFade 0.3s ease-out;
        }

        @keyframes modalFade {
            from {
                opacity: 0;
                transform: scale(0.95);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes carouselScroll {
            0% {
                transform: translateX(100%);
                opacity: 0;
            }

            10% {
                transform: translateX(0);
                opacity: 1;
            }

            90% {
                transform: translateX(0);
                opacity: 1;
            }

            100% {
                transform: translateX(-100%);
                opacity: 0;
            }
        }

        .carousel-animate-in {
            animation: carouselScroll 8s ease-in-out;
        }

        .floating-button {
            animation: float 3s ease-in-out infinite;
        }

        .search-input:focus {
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.4);
            transform: scale(1.02);
            background: rgba(15, 15, 15, 0.9);
            border-color: rgba(168, 85, 247, 0.5);
        }

        .search-input:focus+div {
            opacity: 0.7;
            transform: translateY(-50%) scale(0.95);
        }

        .search-input+div {
            transition: all 0.3s ease;
            opacity: 0.5;
            z-index: 2;
        }

        html {
            scroll-behavior: smooth;
        }

        .scroll-top-button {
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
        }

        .scroll-top-button.visible {
            opacity: 1;
            visibility: visible;
        }

        #githubButton img,
        #kofiButton img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(180deg);
            }
        }

        .settings-icon {
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .settings-icon:hover {
            transform: rotate(180deg);
        }

        .top10-item {
            position: relative;
            transition: transform 0.3s ease;
        }

        .top10-item:hover {
            transform: scale(1.05);
        }

        .top10-number {
            position: absolute;
            left: -10px;
            bottom: 0;
            font-size: 120px;
            font-weight: 900;
            line-height: 1;
            color: white;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.7);
            z-index: 10;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .carousel-content-info {
                display: flex !important;
                flex-direction: column;
                padding: 1rem !important;
                align-items: center;
                text-align: center;
            }

            .carousel-content-info>* {
                display: none !important;
            }

            .carousel-logo-container {
                display: flex !important;
                height: 30px !important;
                margin-bottom: 0.75rem !important;
                justify-content: center;
            }

            .carousel-logo-container img {
                max-height: 100%;
                max-width: 80%;
            }

            .carousel-watch-button {
                display: inline-flex !important;
                margin-top: 0.5rem;
                padding: 0.5rem 1.5rem;
                font-size: 0.875rem;
                width: auto;
                justify-content: center;
            }
        }

        .category-section {
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease-out;
        }

        .category-title {
            margin-bottom: 1rem;
            font-size: 1.5rem;
            font-weight: 700;
            background-image: linear-gradient(to right, #a855f7, #7c3aed);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .category-container {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding-bottom: 1rem;
            gap: 1rem;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .category-item {
            position: relative;
        }

        .top10-item {
            position: relative;
        }

        .genre-results-item {
            position: relative;
        }

        .category-item {
            flex: 0 0 auto;
            width: 180px;
            transition: transform 0.3s ease;
        }

        .category-item:hover {
            transform: translateY(-5px);
        }

        /* Brand colors matching animerealms.org */
        .brand-gradient {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
        }

        .brand-text {
            background: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .brand-border {
            border-color: rgba(168, 85, 247, 0.3);
        }

        .brand-hover:hover {
            background-color: rgba(168, 85, 247, 0.1);
            border-color: rgba(168, 85, 247, 0.5);
        }

        /* Enhanced button animations */
        .btn-animated {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .btn-animated::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-animated:hover::before {
            left: 100%;
        }

        /* Stagger animation for cards */
        .stagger-animation {
            animation-delay: calc(var(--stagger) * 0.1s);
        }
    </style>
</head>

<body class="bg-black text-white min-h-screen" x-data="app()" @keydown.meta.k.prevent="$refs.searchInput.focus()"
    @keydown.ctrl.k.prevent="$refs.searchInput.focus()">
    <!-- Loading Animation Container -->
    <div id="lottie-loader" class="fixed inset-0 z-50 bg-black flex items-center justify-center">
        <div id="lottie-animation" style="width: 200px; height: 200px;"></div>
    </div>

    <div x-show="localStorage.getItem('showParticles') !== 'false'" id="particles-js"
        class="fixed inset-0 pointer-events-none z-0"></div>

    <!-- navigation -->
    <nav class="fixed w-full z-50 glass-effect">
        <div class="container mx-auto px-6 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4 md:space-x-8">
                    <div class="flex items-center space-x-3 navbar-item">
                        <img src="logo.png" alt=" Logo" class="h-8 w-8 md:h-10 md:w-10 animate-pulse-subtle">
                        <span class="hidden sm:inline text-2xl md:text-3xl font-bold logo-text">SkyyPlay</span>
                    </div>
                    <!-- mobile search bar -->
                    <div class="md:hidden relative navbar-item">
                        <input type="text" x-model="searchQuery" @keyup.enter="redirectToSearch()"
                            placeholder="Search..."
                            class="w-32 bg-gray-900 border border-purple-500/20 rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-purple-400">
                    </div>
                    <div class="hidden md:flex space-x-6">
                        <button @click="switchTab()" class="nav-link navbar-item">
                            <span x-text="currentTab === 'movies' ? 'Switch to TV Shows' : 'Switch to Movies'"></span>
                        </button>
                        <a href="livesports.html" class="nav-link navbar-item">Live Sports</a>
                        <a href="search.html" class="nav-link navbar-item">Search</a>
                        <button @click="showWatchLater = true" class="nav-link flex items-center space-x-2 navbar-item">
                            <span>Watch Later</span>
                            <span x-show="watchLaterCount > 0"
                                class="bg-purple-600 text-white text-xs flex items-center justify-center rounded-full w-6 h-6 animate-pulse-subtle"
                                x-text="watchLaterCount"></span>
                        </button>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <div class="search-container hidden md:block">
                            <input type="text" x-ref="searchInput" x-model="searchQuery"
                                @keyup.debounce.300ms="redirectToSearch()" @keyup.enter="redirectToSearch()"
                                placeholder="Search..."
                                class="search-input bg-gray-900 rounded-full px-6 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400 w-64">
                            <div
                                class="absolute right-3 top-1/2 -translate-y-1/2 flex items-center space-x-1 text-gray-400 pointer-events-none select-none">
                                <span class="text-xs bg-gray-700 rounded px-1.5 py-0.5">⌘</span>
                                <span class="text-xs bg-gray-700 rounded px-1.5 py-0.5">K</span>
                            </div>
                        </div>
                    </div>
                    <a href="settings.html"
                        class="text-gray-400 hover:text-purple-400 transition-colors duration-300 navbar-item"
                        title="Settings">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 settings-icon" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </a>
                    <!-- mobile menu button -->
                    <button @click="mobileMenu = !mobileMenu"
                        class="md:hidden text-gray-300 hover:text-white navbar-item">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- mobile menu -->
            <div x-show="mobileMenu" x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 transform -translate-y-2"
                x-transition:enter-end="opacity-100 transform translate-y-0"
                x-transition:leave="transition ease-in duration-150"
                x-transition:leave-start="opacity-100 transform translate-y-0"
                x-transition:leave-end="opacity-0 transform -translate-y-2" class="md:hidden mt-4 pb-4">
                <div class="flex flex-col space-y-4">
                    <button @click="switchTab(); mobileMenu = false"
                        class="text-left px-4 py-2 hover:bg-gray-800 rounded-lg transition-colors">
                        <span x-text="currentTab === 'movies' ? 'Switch to TV Shows' : 'Switch to Movies'"></span>
                    </button>
                    <a href="livesports.html" class="px-4 py-2 hover:bg-gray-800 rounded-lg transition-colors">Live
                        Sports</a>
                    <a href="search.html" class="px-4 py-2 hover:bg-gray-800 rounded-lg transition-colors">Search</a>
                    <button @click="showWatchLater = true; mobileMenu = false"
                        class="flex items-center justify-between px-4 py-2 hover:bg-gray-800 rounded-lg transition-colors">
                        <span>Watch Later</span>
                        <span x-show="watchLaterCount > 0"
                            class="bg-purple-600 text-white text-xs flex items-center justify-center rounded-full w-6 h-6"
                            x-text="watchLaterCount"></span>
                    </button>
                    <a href="settings.html"
                        class="px-4 py-2 hover:bg-gray-800 rounded-lg transition-colors flex items-center space-x-2">
                        <span>Settings</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Featured Carousel Section -->
    <div class="pt-24 pb-8 animate-fade-in-up" id="featuredCarousel">
        <div class="container mx-auto px-4">
            <div class="relative h-[500px] md:h-[600px] rounded-2xl overflow-hidden">
                <!-- Background Image with Overlay -->
                <div class="absolute inset-0" id="carouselBackground">
                    <!-- Background image: no blur on mobile, blur on md and up -->
                    <div class="absolute inset-0 bg-cover bg-center transition-all duration-1000 
                blur-none md:blur-sm opacity-20 md:opacity-30" id="backgroundImage"></div>

                    <!-- Gradient overlay: lighter on mobile, stronger on larger screens -->
                    <div class="absolute inset-0 bg-gradient-to-r 
                from-black/60 via-black/40 to-black/20 
                md:from-black/90 md:via-black/70 md:to-black/40"></div>
                </div>


                <!-- Content Container -->
                <div class="relative z-10 h-full flex items-center">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 w-full">
                        <!-- Left Content -->
                        <div class="flex flex-col justify-center px-6 lg:px-12 space-y-6 animate-slide-in-left">
                            <div class="space-y-4">
                                <h1 class="text-3xl md:text-5xl lg:text-6xl font-bold text-white leading-tight"
                                    id="carouselTitle">
                                    Loading...
                                </h1>
                                <div class="flex items-center space-x-4 text-gray-300">
                                    <span class="bg-purple-600 text-white px-2 py-1 rounded text-sm font-medium"
                                        id="carouselType">TV</span>
                                    <span id="carouselYear">2024</span>
                                    <div class="flex items-center space-x-1">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400"
                                            viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 
                                            <path d=" M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0
                                                00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364
                                                1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175
                                                0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0
                                                00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0
                                                00.951-.69l1.07-3.292z" />
                                        </svg>
                                        <span id="carouselRating">8.5</span>
                                    </div>
                                </div>

                            </div>

                            <div class="flex flex-col sm:flex-row gap-4">
                                <button
                                    class="brand-gradient text-white px-8 py-3 rounded-full flex items-center justify-center space-x-2 transition-all duration-300 hover:scale-105 font-medium btn-animated"
                                    id="carouselWatchButton">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                        fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"
                                            clip-rule="evenodd" />
                                    </svg>
                                    <span>Watch Now</span>
                                </button>
                                <button
                                    class="bg-gray-800/80 text-white px-8 py-3 rounded-full flex items-center justify-center space-x-2 transition-all duration-300 hover:bg-gray-700 font-medium border border-gray-600 btn-animated">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    <span>More Info</span>
                                </button>
                            </div>
                        </div>

                        <!-- Right Poster -->
                        <div
                            class="hidden md:flex items-center justify-center lg:justify-end px-6 lg:px-12 animate-slide-in-right">
                            <div class="relative group">
                                <div
                                    class="w-64 md:w-80 lg:w-96 aspect-[2/3] rounded-2xl overflow-hidden shadow-2xl transition-transform duration-300 group-hover:scale-105">
                                    <img id="carouselPoster" src="/placeholder.svg?height=600&width=400"
                                        alt="Featured Content" class="w-full h-full object-cover">
                                </div>
                                <div class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-2xl">
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Navigation Arrows -->
                <button id="prevButton"
                    class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-purple-600/80 text-white p-3 rounded-full z-20 transition-all duration-300 backdrop-blur-sm border border-purple-500/30">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                <button id="nextButton"
                    class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-purple-600/80 text-white p-3 rounded-full z-20 transition-all duration-300 backdrop-blur-sm border border-purple-500/30">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </button>

                <!-- Pagination Dots -->
                <div class="absolute bottom-6 left-1/2 -translate-x-1/2 flex space-x-2 z-20" id="carouselDots">
                    <!-- Dots will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Genre Selection Component -->
    <div class="py-8 px-4 animate-fade-in-up" id="genreSection">
        <div class="container mx-auto">
            <div class="relative">
                <!-- Genre Pills Container -->
                <div class="flex items-center">
                    <!-- Left Arrow -->
                    <button id="genreScrollLeft"
                        class="flex-shrink-0 p-2 text-gray-400 hover:text-white transition-colors mr-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>

                    <!-- Scrollable Genre Container -->
                    <div class="flex-1 overflow-hidden">
                        <div class="flex space-x-3 overflow-x-auto scrollbar-hide scroll-smooth" id="genreContainer"
                            style="scrollbar-width: none; -ms-overflow-style: none;">
                            <!-- Genre pills will be inserted here -->
                        </div>
                    </div>

                    <!-- Right Arrow -->
                    <button id="genreScrollRight"
                        class="flex-shrink-0 p-2 text-gray-400 hover:text-white transition-colors ml-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Genre Results Section - Now Scrollable -->
    <div class="py-8 px-4 animate-fade-in-up" id="genreResults" style="display: none;">
        <div class="container mx-auto">
            <h2 class="text-2xl font-bold brand-text mb-6" id="genreResultsTitle">Action Movies</h2>
            <div class="genre-results-container">
                <div class="genre-results-scroll" id="genreResultsGrid">
                    <!-- Genre filtered results will be inserted here -->
                </div>

                <!-- Navigation Buttons for Genre Results -->
                <button onclick="scrollGenreResults('left')" class="section-nav-button prev">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>

                <button onclick="scrollGenreResults('right')" class="section-nav-button next">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </button>
            </div>

            <div class="text-center mt-8">
                <button id="loadMoreGenre"
                    class="bg-gray-800 hover:bg-gray-700 text-white px-6 py-3 rounded-full transition-colors border border-purple-500/20 btn-animated">
                    Load More
                </button>
            </div>
        </div>
    </div>

    <!-- continue watching section -->
    <div class="pt-24 pb-4 px-6 animate-fade-in-up" id="continueWatchingSection" style="display: none;">
        <div class="container mx-auto">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-4">
                <h2 class="text-2xl font-bold brand-text">
                    Continue Watching</h2>
                <button id="clearContinueWatching"
                    class="text-sm text-gray-400 hover:text-purple-400 transition-colors">Clear All</button>
            </div>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" id="continueWatchingGrid">
                <!-- Continue watching items will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Top 10 Today Section -->
    <div class="py-8 px-0 sm:px-6 animate-fade-in-up" id="top10Section">
        <div class="container mx-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold brand-text" id="top10Title">
                    Top 10 in English Today
                </h2>
                <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors flex items-center">
                    View All
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20"
                        fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                            clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            <div class="relative">
                <div class="relative overflow-container">
                    <div class="flex space-x-4 scroll-container" id="top10Container">
                        <!-- Top 10 items will be inserted here -->
                    </div>

                    <button onclick="scrollSection('top10Container', 'left')" class="section-nav-button prev">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>

                    <button onclick="scrollSection('top10Container', 'right')" class="section-nav-button next">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Category Sections (will be dynamically generated) -->
    <div id="categorySections" class="px-0 sm:px-6 py-4 overflow-hidden">
        <!-- Category sections will be inserted here -->
    </div>

    <!-- streaming services -->
    <div class="container mx-auto px-4 md:px-6 py-8 md:py-12 animate-fade-in-up">
        <div class="text-center mb-6 md:mb-8">
            <h2 class="text-xl md:text-2xl font-bold text-gray-300">Content Available From</h2>
            <p class="text-sm md:text-base text-gray-400 mt-2">SkyyPlay aggregates content from various premium
                streaming
                platforms</p>
        </div>
        <div
            class="grid grid-cols-3 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 items-center justify-items-center opacity-80">
            <a href="https://netflix.com" target="_blank" class="transform transition-transform hover:scale-105">
                <img src="https://upload.wikimedia.org/wikipedia/commons/0/08/Netflix_2015_logo.svg" alt="Netflix"
                    class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(229,9,20,0.7)]">
            </a>
            <a href="https://www.primevideo.com" target="_blank" class="transform transition-transform hover:scale-105">
                <img src="https://upload.wikimedia.org/wikipedia/commons/1/11/Amazon_Prime_Video_logo.svg"
                    alt="Prime Video"
                    class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(0,168,225,0.7)]">
            </a>
            <a href="https://www.disneyplus.com" target="_blank" class="transform transition-transform hover:scale-105">
                <img src="https://upload.wikimedia.org/wikipedia/commons/3/3e/Disney%2B_logo.svg" alt="Disney+"
                    class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(113,168,255,0.7)]">
            </a>
            <a href="https://www.hulu.com" target="_blank" class="transform transition-transform hover:scale-105">
                <img src="https://upload.wikimedia.org/wikipedia/commons/f/f9/Hulu_logo_%282018%29.svg" alt="Hulu"
                    class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(28,231,131,0.7)]">
            </a>
            <a href="https://www.max.com" target="_blank" class="transform transition-transform hover:scale-105">
                <img src="https://upload.wikimedia.org/wikipedia/commons/1/17/HBO_Max_Logo.svg" alt="HBO Max"
                    class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(116,80,254,0.7)]">
            </a>
            <a href="https://tv.apple.com" target="_blank" class="transform transition-transform hover:scale-105">
                <img src="https://upload.wikimedia.org/wikipedia/commons/2/28/Apple_TV_Plus_Logo.svg" alt="Apple TV+"
                    class="h-6 md:h-8 w-auto grayscale hover:grayscale-0 hover:scale-110 hover:brightness-125 transition-all duration-300 transform hover:drop-shadow-[0_0_7px_rgba(0,244,244,0.7)]">
            </a>
        </div>
    </div>

    <footer class="text-gray-400 py-4 md:py-6 mt-8 md:mt-12">
        <div class="container mx-auto px-4 md:px-6 text-center">
            <p class="text-xs md:text-sm">
                All rules and regulations of the respective streaming platforms apply. <br>
                This is a personal project and not affiliated with any streaming service. <br>
            </p>
            <p class="mt-2 text-xs">
                Made with vanilla JS, Tailwind CSS, and TMDB API. <br>
            </p>
            <p class="mt-2 text-xs">
                <a href="mailto:umar.20221CIT0024@presidencuniversity.in"
                    class="text-purple-400 hover:text-purple-300 transition-colors">https://github.com/Umarahm/nova-app</a>
            </p>
        </div>
    </footer>

    <!-- particles.js -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        particlesJS('particles-js', {
            particles: {
                number: {
                    value: 80,
                    density: {
                        enable: true,
                        value_area: 800
                    }
                },
                color: {
                    value: '#a855f7'
                },
                shape: {
                    type: 'circle'
                },
                opacity: {
                    value: 0.2,
                    random: true,
                    animation: {
                        enable: true,
                        speed: 1,
                        opacity_min: 0.1,
                        sync: false
                    }
                },
                size: {
                    value: 3,
                    random: true,
                    animation: {
                        enable: true,
                        speed: 2,
                        size_min: 0.1,
                        sync: false
                    }
                },
                line_linked: {
                    enable: true,
                    distance: 150,
                    color: '#a855f7',
                    opacity: 0.2,
                    width: 1
                },
                move: {
                    enable: true,
                    speed: 1,
                    direction: 'none',
                    random: true,
                    straight: false,
                    out_mode: 'out',
                    bounce: false,
                }
            },
            interactivity: {
                detect_on: 'window',
                events: {
                    onhover: {
                        enable: true,
                        mode: 'grab'
                    },
                    onclick: {
                        enable: true,
                        mode: 'push'
                    },
                    resize: true
                },
                modes: {
                    grab: {
                        distance: 140,
                        line_linked: {
                            opacity: 0.5
                        }
                    },
                    push: {
                        particles_nb: 4
                    }
                }
            },
            retina_detect: true
        });
    </script>

    <!-- watch later modal -->
    <div x-show="showWatchLater"
        class="fixed inset-0 z-50 overflow-auto bg-black bg-opacity-90 flex items-start justify-center"
        @click.away="showWatchLater = false" x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
        x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0">
        <div class="bg-gray-900 rounded-lg w-full max-w-4xl mt-20 modal-animation border border-purple-500/20">
            <div class="p-6 border-b border-gray-800">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-bold">Watch Later</h2>
                    <div class="flex items-center space-x-4">
                        <button @click="showClearConfirm = true" x-show="watchLaterItems.length > 0"
                            class="text-gray-400 hover:text-red-500 flex items-center space-x-2 transition-colors duration-300">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                            <span>Clear All</span>
                        </button>
                        <button @click="showWatchLater = false" class="text-gray-500 hover:text-white">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div class="p-6">
                <div x-show="!watchLaterItems.length" class="text-center text-gray-500 py-8">
                    No items in your watch later list
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                    <template x-for="item in watchLaterItems" :key="item.id">
                        <div class="relative bg-gray-800 rounded-lg overflow-hidden border border-purple-500/20">
                            <a :href="'watch.html?id=' + item.id + '&type=' + item.type" class="block">
                                <img :src="'https://image.tmdb.org/t/p/w500' + item.poster_path"
                                    :alt="item.title || item.name" class="w-full h-48 object-cover">
                                <div class="p-4">
                                    <h3 class="font-medium" x-text="item.title || item.name"></h3>
                                    <p class="text-gray-400 text-sm mt-1"
                                        x-text="'⭐ ' + (item.vote_average || 'N/A') + '/10'"></p>
                                </div>
                            </a>
                            <button @click="toggleWatchLater(item)"
                                class="absolute top-2 right-2 p-2 bg-gray-900 bg-opacity-75 rounded-full hover:bg-purple-600 transition-all duration-300 text-purple-400">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor"
                                    viewBox="0 0 24 24">
                                    <path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z" />
                                </svg>
                            </button>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>

    <!-- clear confirmation modal -->
    <div x-show="showClearConfirm"
        class="fixed inset-0 z-[60] overflow-auto bg-black bg-opacity-90 flex items-center justify-center"
        @click.away="showClearConfirm = false" x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100"
        x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 transform scale-100"
        x-transition:leave-end="opacity-0 transform scale-95">
        <div class="bg-gray-900 rounded-lg w-full max-w-md p-6 modal-animation border border-purple-500/20">
            <div class="text-center">
                <h3 class="text-lg font-semibold mb-4">Clear Watch Later</h3>
                <p class="text-gray-400 mb-6">Are you sure you want to clear all items from your watch later list?</p>
                <div class="flex space-x-4">
                    <button @click="showClearConfirm = false"
                        class="flex-1 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
                        Cancel
                    </button>
                    <button @click="doClearWatchLater()"
                        class="flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors">
                        Clear All
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- context menu -->
    <div x-data="contextMenuHandler()" x-show="$store.contextMenu.show" @click.away="$store.contextMenu.show = false"
        @keydown.escape.window="$store.contextMenu.show = false"
        :style="`position: fixed; left: ${$store.contextMenu.x}px; top: ${$store.contextMenu.y}px`"
        class="bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 w-56 py-2 animate-fade-in" x-cloak>

        <div class="px-4 py-2 border-b border-gray-700">
            <h3 class="text-sm font-medium text-gray-300"
                x-text="$store.contextMenu.item?.title || $store.contextMenu.item?.name"></h3>
        </div>

        <a :href="'https://www.themoviedb.org/' + (currentTab === 'movies' ? 'movie' : 'tv') + '/' + $store.contextMenu.item?.id"
            target="_blank" class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
            </svg>
            View on TMDB
        </a>

        <button @click="copyToClipboard($store.contextMenu.item?.title || $store.contextMenu.item?.name)"
            class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
            </svg>
            Copy Title
        </button>

        <button @click="copyToClipboard($store.contextMenu.item?.id)"
            class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
            </svg>
            Copy TMDB ID
        </button>

        <button @click="copyToClipboard($store.contextMenu.item?.overview)"
            class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
            </svg>
            Copy Overview
        </button>

        <div class="border-t border-gray-700 my-2"></div>

        <button @click="toggleWatchLater($store.contextMenu.item); $store.contextMenu.show = false"
            class="px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 flex items-center gap-2 w-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
            </svg>
            <span
                x-text="isInWatchLater($store.contextMenu.item) ? 'Remove from Watch Later' : 'Add to Watch Later'"></span>
        </button>
    </div>

    <!-- toast notification -->
    <div x-data="toastHandler()" x-show="show" @show-toast.window="showToast($event.detail.message)"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform translate-y-8"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 transform translate-y-0"
        x-transition:leave-end="opacity-0 transform translate-y-8"
        class="fixed bottom-4 right-4 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-xl z-[100] flex items-center gap-2 border border-purple-500/20"
        style="pointer-events: none;">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-400 flex-shrink-0" viewBox="0 0 20 20"
            fill="currentColor">
            <path fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd" />
        </svg>
        <span x-text="message" class="text-sm"></span>
    </div>

    <script>
        function toastHandler() {
            return {
                message: '',
                show: false,
                showToast(msg) {
                    this.message = msg;
                    this.show = true;
                    setTimeout(() => {
                        this.show = false;
                    }, 3000);
                }
            }
        }

        function contextMenuHandler() {
            return {
                copyToClipboard(text) {
                    if (!text) return;
                    navigator.clipboard.writeText(text).then(() => {
                        window.dispatchEvent(new CustomEvent('show-toast', {
                            detail: { message: 'Copied to clipboard!' }
                        }));
                    }).catch(() => {
                        window.dispatchEvent(new CustomEvent('show-toast', {
                            detail: { message: 'Failed to copy to clipboard' }
                        }));
                    });
                }
            }
        }

        document.addEventListener('alpine:init', () => {
            Alpine.store('contextMenu', {
                show: false,
                x: 0,
                y: 0,
                item: null
            });
        });
    </script>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.store('contextMenu', {
                show: false,
                x: 0,
                y: 0,
                item: null
            });
        });

        function app() {
            return {
                apiKey: '1070730380f5fee0d87cf0382670b255',
                currentTab: 'shows',
                language: localStorage.getItem('selectedLanguage') || 'ur',
                searchQuery: '',
                showWatchLater: false,
                watchLaterItems: [],
                watchLaterCount: 0,
                showClearConfirm: false,
                mobileMenu: false,
                genreData: [],
                selectedGenre: null,
                genreResults: [],
                genreResultsPage: 1,
                carouselItems: null,
                currentCarouselIndex: 0,

                async init() {
                    const savedItems = localStorage.getItem('watchLater');
                    if (savedItems) {
                        this.watchLaterItems = JSON.parse(savedItems);
                        this.watchLaterCount = this.watchLaterItems.length;
                    }

                    // Initialize all components
                    await Promise.all([
                        this.fetchTop10Content(),
                        this.generateCategorySections(),
                        this.initializeCarousel(),
                        this.initializeGenres()
                    ]);

                    this.$watch('currentTab', async () => {
                        await this.refreshAllContent();
                    });

                    this.$watch('language', () => {
                        this.fetchTop10Content();
                        this.updateTop10Title();
                    });
                },

                async switchTab() {
                    this.currentTab = this.currentTab === 'movies' ? 'shows' : 'movies';
                    await this.refreshAllContent();
                },

                async refreshAllContent() {
                    const loadingIndicator = document.createElement('div');
                    loadingIndicator.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
                    loadingIndicator.innerHTML = '<div class="text-white">Loading...</div>';
                    document.body.appendChild(loadingIndicator);

                    try {
                        await Promise.all([
                            this.fetchTop10Content(),
                            this.generateCategorySections(),
                            this.initializeCarousel(),
                            this.initializeGenres()
                        ]);

                        // Hide genre results when switching tabs
                        const genreResults = document.getElementById('genreResults');
                        if (genreResults) {
                            genreResults.style.display = 'none';
                        }
                        this.selectedGenre = null;
                    } catch (error) {
                        console.error('Error refreshing content:', error);
                    } finally {
                        document.body.removeChild(loadingIndicator);
                    }
                },

                redirectToSearch() {
                    if (this.searchQuery.trim()) {
                        window.location.href = `search.html?q=${encodeURIComponent(this.searchQuery.trim())}`;
                    }
                },

                async fetchTop10Content() {
                    const baseUrl = 'https://api.themoviedb.org/3';
                    const endpoint = this.currentTab === 'movies' ? 'movie/popular' : 'tv/popular';
                    const url = `${baseUrl}/${endpoint}?api_key=${this.apiKey}&language=${this.language}&page=1`;

                    try {
                        const response = await fetch(url);
                        const data = await response.json();
                        const top10Items = data.results.slice(0, 10);

                        // Update the Top 10 container
                        const top10Container = document.getElementById('top10Container');
                        if (top10Container) {
                            top10Container.innerHTML = '';

                            top10Items.forEach((item, index) => {
                                const itemElement = document.createElement('div');
                                itemElement.className = 'top10-item flex-shrink-0 relative';
                                itemElement.innerHTML = `
                                    <a href="watch.html?id=${item.id}&type=${this.currentTab === 'movies' ? 'movie' : 'tv'}" class="block">
                                        <div class="relative w-40 md:w-48 aspect-[2/3] rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300">
                                            <img src="https://image.tmdb.org/t/p/w500${item.poster_path}" 
                                                alt="${item.title || item.name}" 
                                                class="w-full h-full object-cover"
                                                onerror="this.src='/logo.png'; this.classList.remove('object-cover'); this.classList.add('object-contain');">
                                            <div class="top10-number">${index + 1}</div>
                                        </div>
                                    </a>
                                `;
                                top10Container.appendChild(itemElement);
                            });
                        }

                        this.updateTop10Title();
                    } catch (error) {
                        console.error('Error fetching top 10 content:', error);
                    }
                },

                updateTop10Title() {
                    const languageName = this.getLanguageName(this.language);
                    const top10Title = document.getElementById('top10Title');
                    if (top10Title) {
                        top10Title.textContent = `Top 10 ${this.currentTab === 'movies' ? 'Movies' : 'TV Shows'} in English Today`;
                    }
                },

                getLanguageName(code) {
                    const languages = {
                        en: 'English',
                        fr: 'French',
                        es: 'Spanish',
                        de: 'German',
                        it: 'Italian',
                        ja: 'Japanese',
                        ko: 'Korean',
                        ru: 'Russian',
                        hi: 'Hindi',
                        ur: 'Urdu',
                    };
                    return languages[code] || code;
                },

                async generateCategorySections() {
                    // Define categories
                    const categories = [
                        { id: 28, name: 'Action' },
                        { id: 35, name: 'Comedy' },
                        { id: 27, name: 'Horror' },
                        { id: 18, name: 'Drama' },
                        { id: 12, name: 'Adventure' },
                        { id: 14, name: 'Fantasy' },
                        { id: 878, name: 'Science Fiction' },
                        { id: 9648, name: 'Mystery' },
                        { id: 10749, name: 'Romance' },
                        { id: 10751, name: 'Family' },
                        { id: 10752, name: 'War' },
                        { id: 37, name: 'Western' }
                    ];

                    // Shuffle the categories to randomize
                    const shuffledCategories = [...categories].sort(() => 0.5 - Math.random());

                    // Take the first 5 categories
                    const selectedCategories = shuffledCategories.slice(0, 7);

                    const categorySectionsContainer = document.getElementById('categorySections');
                    if (categorySectionsContainer) {
                        categorySectionsContainer.innerHTML = '';

                        // Create each category section
                        for (const category of selectedCategories) {
                            await this.createCategorySection(category, categorySectionsContainer);
                        }
                    }
                },

                async createCategorySection(category, container) {
                    const baseUrl = 'https://api.themoviedb.org/3/discover';
                    const endpoint = this.currentTab === 'movies' ? 'movie' : 'tv';
                    const url = `${baseUrl}/${endpoint}?api_key=${this.apiKey}&with_genres=${category.id}&language=${this.language}&page=1`;

                    try {
                        const response = await fetch(url);
                        const data = await response.json();
                        const items = data.results.slice(0, 20);

                        if (items.length === 0) return;

                        const sectionElement = document.createElement('div');
                        sectionElement.className = 'category-section container mx-auto';
                        sectionElement.innerHTML = `
            <div class="flex items-center justify-between mb-4 px-4 sm:px-6">
                <h2 class="category-title">${category.name}</h2>
                <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors flex items-center">
                    View All
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-1" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            <div class="relative overflow-container">
                <div class="category-container scroll-container" id="category-${category.id}">
                    ${items.map(item => `
    <div class="category-item">
        <a href="watch.html?id=${item.id}&type=${this.currentTab === 'movies' ? 'movie' : 'tv'}" class="block rounded-lg overflow-hidden bg-gray-800 border border-purple-500/10">
            <div class="relative aspect-[2/3]">
                <img src="https://image.tmdb.org/t/p/w500${item.poster_path}" 
                    alt="${item.title || item.name}" 
                    class="w-full h-full object-cover"
                    onerror="this.src='/logo.png'; this.classList.remove('object-cover'); this.classList.add('object-contain');">
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-3">
                    <h3 class="text-sm font-semibold text-white">${item.title || item.name}</h3>
                    <p class="text-xs text-gray-300 mt-1">⭐ ${item.vote_average || 'N/A'}/10</p>
                </div>
            </div>
        </a>
        <button onclick="event.preventDefault(); event.stopPropagation(); window.toggleWatchLaterWithFeedback(this, {id: ${item.id}, title: '${(item.title || item.name).replace(/'/g, "\\'")}', name: '${(item.title || item.name).replace(/'/g, "\\'")}', poster_path: '${item.poster_path}', vote_average: ${item.vote_average || 0}, type: '${this.currentTab === 'movies' ? 'movie' : 'tv'}'})" 
    class="watchlist-btn absolute top-2 right-2 p-2 bg-gray-900/75 rounded-full hover:bg-purple-600 transition-all duration-300 z-10">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
    </svg>
</button>
    </div>
`).join('')}
                </div>
                
                <button onclick="scrollSection('category-${category.id}', 'left')" class="section-nav-button prev">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                
                <button onclick="scrollSection('category-${category.id}', 'right')" class="section-nav-button next">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </button>
            </div>
        `;

                        container.appendChild(sectionElement);
                    } catch (error) {
                        console.error(`Error fetching ${category.name} content:`, error);
                    }
                },

                async initializeGenres() {
                    const genres = [
                        { id: 28, name: 'Action' },
                        { id: 12, name: 'Adventure' },
                        { id: 16, name: 'Animation' },
                        { id: 35, name: 'Comedy' },
                        { id: 80, name: 'Crime' },
                        { id: 99, name: 'Documentary' },
                        { id: 18, name: 'Drama' },
                        { id: 10751, name: 'Family' },
                        { id: 14, name: 'Fantasy' },
                        { id: 36, name: 'History' },
                        { id: 27, name: 'Horror' },
                        { id: 10402, name: 'Music' },
                        { id: 9648, name: 'Mystery' },
                        { id: 10749, name: 'Romance' },
                        { id: 878, name: 'Sci-Fi' },
                        { id: 10770, name: 'TV Movie' },
                        { id: 53, name: 'Thriller' },
                        { id: 10752, name: 'War' },
                        { id: 37, name: 'Western' }
                    ];

                    this.genreData = genres;
                    this.renderGenres();
                    this.setupGenreScrolling();
                },

                renderGenres() {
                    const container = document.getElementById('genreContainer');
                    if (!container) return;

                    container.innerHTML = '';

                    this.genreData.forEach(genre => {
                        const pill = document.createElement('button');
                        pill.className = 'flex-shrink-0 px-6 py-2 rounded-full text-sm font-medium transition-all duration-300 border whitespace-nowrap';
                        pill.className += this.selectedGenre === genre.id
                            ? ' brand-gradient text-white border-purple-500'
                            : ' bg-gray-800 text-gray-300 border-gray-600 hover:bg-gray-700 hover:text-white';
                        pill.textContent = genre.name;
                        pill.addEventListener('click', () => this.selectGenre(genre));
                        container.appendChild(pill);
                    });
                },

                setupGenreScrolling() {
                    const container = document.getElementById('genreContainer');
                    const leftBtn = document.getElementById('genreScrollLeft');
                    const rightBtn = document.getElementById('genreScrollRight');

                    if (!container || !leftBtn || !rightBtn) return;

                    leftBtn.addEventListener('click', () => {
                        container.scrollBy({ left: -200, behavior: 'smooth' });
                    });

                    rightBtn.addEventListener('click', () => {
                        container.scrollBy({ left: 200, behavior: 'smooth' });
                    });
                },

                async selectGenre(genre) {
                    this.selectedGenre = genre.id;
                    this.genreResultsPage = 1;
                    this.renderGenres(); // Re-render to show selected state

                    await this.fetchGenreResults(genre);

                    // Show results section
                    const resultsSection = document.getElementById('genreResults');
                    const titleElement = document.getElementById('genreResultsTitle');

                    if (resultsSection && titleElement) {
                        titleElement.textContent = `${genre.name} ${this.currentTab === 'movies' ? 'Movies' : 'TV Shows'}`;
                        resultsSection.style.display = 'block';
                        resultsSection.scrollIntoView({ behavior: 'smooth' });
                    }
                },

                async fetchGenreResults(genre) {
                    const baseUrl = 'https://api.themoviedb.org/3/discover';
                    const endpoint = this.currentTab === 'movies' ? 'movie' : 'tv';
                    const url = `${baseUrl}/${endpoint}?api_key=${this.apiKey}&with_genres=${genre.id}&language=en-US&page=${this.genreResultsPage}&sort_by=popularity.desc`;

                    try {
                        const response = await fetch(url);
                        const data = await response.json();

                        if (this.genreResultsPage === 1) {
                            this.genreResults = data.results;
                        } else {
                            this.genreResults = [...this.genreResults, ...data.results];
                        }

                        this.renderGenreResults();

                        // Setup load more button
                        const loadMoreBtn = document.getElementById('loadMoreGenre');
                        if (loadMoreBtn) {
                            loadMoreBtn.style.display = data.page < data.total_pages ? 'block' : 'none';
                            loadMoreBtn.onclick = () => this.loadMoreGenreResults(genre);
                        }
                    } catch (error) {
                        console.error('Error fetching genre results:', error);
                    }
                },

                async loadMoreGenreResults(genre) {
                    this.genreResultsPage++;
                    await this.fetchGenreResults(genre);
                },

                renderGenreResults() {
                    const container = document.getElementById('genreResultsGrid');
                    if (!container) return;

                    container.innerHTML = '';

                    this.genreResults.forEach((item, index) => {
                        const card = document.createElement('div');
                        card.className = 'genre-results-item card-hover rounded-lg overflow-hidden bg-gray-800 border border-purple-500/10';
                        card.innerHTML = `
    <a href="watch.html?id=${item.id}&type=${this.currentTab === 'movies' ? 'movie' : 'tv'}" class="block">
        <div class="relative aspect-[2/3]">
            <img src="https://image.tmdb.org/t/p/w500${item.poster_path}" 
                alt="${item.title || item.name}" 
                class="w-full h-full object-cover"
                onerror="this.src='/logo.png'; this.classList.remove('object-cover'); this.classList.add('object-contain');">
            <div class="card-overlay absolute inset-0 bg-gradient-to-t from-black/80 to-transparent opacity-0 hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-3">
                <h3 class="text-sm font-semibold text-white">${item.title || item.name}</h3>
                <p class="text-xs text-gray-300 mt-1">⭐ ${item.vote_average ? item.vote_average.toFixed(1) : 'N/A'}/10</p>
            </div>
        </div>
    </a>
   <button onclick="event.preventDefault(); event.stopPropagation(); Alpine.store('app') ? Alpine.store('app').toggleWatchLater({id: ${item.id}, title: '${(item.title || item.name).replace(/'/g, "\\'")}', name: '${(item.title || item.name).replace(/'/g, "\\'")}', poster_path: '${item.poster_path}', vote_average: ${item.vote_average || 0}, type: '${this.currentTab === 'movies' ? 'movie' : 'tv'}'}) : window.appInstance.toggleWatchLater({id: ${item.id}, title: '${(item.title || item.name).replace(/'/g, "\\'")}', name: '${(item.title || item.name).replace(/'/g, "\\'")}', poster_path: '${item.poster_path}', vote_average: ${item.vote_average || 0}, type: '${this.currentTab === 'movies' ? 'movie' : 'tv'}'})" 
    class="absolute top-2 right-2 p-2 bg-gray-900/75 rounded-full hover:bg-purple-600 transition-all duration-300 z-10">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
    </svg>
</button>
`;
                        container.appendChild(card);
                    });
                },

                async initializeCarousel() {
                    const baseUrl = 'https://api.themoviedb.org/3';

                    try {
                        const [movieResponse, tvResponse] = await Promise.all([
                            fetch(`${baseUrl}/movie/popular?api_key=${this.apiKey}&language=en-US&page=1`),
                            fetch(`${baseUrl}/tv/popular?api_key=${this.apiKey}&language=en-US&page=1`)
                        ]);

                        const movieData = await movieResponse.json();
                        const tvData = await tvResponse.json();

                        let combinedResults = [
                            ...movieData.results.slice(0, 5).map(item => ({ ...item, type: 'movie' })),
                            ...tvData.results.slice(0, 5).map(item => ({ ...item, type: 'tv' }))
                        ];

                        combinedResults = combinedResults.sort(() => 0.5 - Math.random()).slice(0, 8);

                        this.carouselItems = combinedResults;
                        this.currentCarouselIndex = 0;
                        this.renderCarouselItem();
                        this.setupCarouselControls();
                    } catch (error) {
                        console.error('Error initializing carousel:', error);
                    }
                },

                renderCarouselItem() {
                    if (!this.carouselItems || this.carouselItems.length === 0) return;

                    const item = this.carouselItems[this.currentCarouselIndex];

                    // Update background
                    const bgImage = document.getElementById('backgroundImage');
                    if (bgImage) {
                        bgImage.style.backgroundImage = `url(https://image.tmdb.org/t/p/original${item.backdrop_path || item.poster_path})`;
                    }

                    // Update content
                    const title = document.getElementById('carouselTitle');
                    const type = document.getElementById('carouselType');
                    const year = document.getElementById('carouselYear');
                    const rating = document.getElementById('carouselRating');
                    const description = document.getElementById('carouselDescription');
                    const poster = document.getElementById('carouselPoster');
                    const watchBtn = document.getElementById('carouselWatchButton');

                    if (title) {
                        title.textContent = item.title || item.name;
                        title.classList.remove('carousel-animate-in');
                        void title.offsetWidth;
                        title.classList.add('carousel-animate-in');
                    }
                    if (type) type.textContent = item.type === 'movie' ? 'MOVIE' : 'TV SERIES';
                    if (year) year.textContent = new Date(item.release_date || item.first_air_date || '').getFullYear() || 'N/A';
                    if (rating) rating.textContent = item.vote_average ? item.vote_average.toFixed(1) : 'N/A';
                    if (description) description.textContent = item.overview || 'No description available.';
                    if (poster) {
                        poster.src = `https://image.tmdb.org/t/p/w500${item.poster_path}`;
                        poster.classList.remove('carousel-animate-in');
                        void poster.offsetWidth;
                        poster.classList.add('carousel-animate-in');
                    };
                    if (watchBtn) {
                        watchBtn.onclick = () => {
                            window.location.href = `watch.html?id=${item.id}&type=${item.type}`;
                        };
                    }

                    this.updateCarouselDots();
                },

                setupCarouselControls() {
                    const prevBtn = document.getElementById('prevButton');
                    const nextBtn = document.getElementById('nextButton');

                    if (prevBtn) {
                        prevBtn.onclick = () => {
                            this.currentCarouselIndex = (this.currentCarouselIndex - 1 + this.carouselItems.length) % this.carouselItems.length;
                            this.renderCarouselItem();
                        };
                    }

                    if (nextBtn) {
                        nextBtn.onclick = () => {
                            this.currentCarouselIndex = (this.currentCarouselIndex + 1) % this.carouselItems.length;
                            this.renderCarouselItem();
                        };
                    }

                    // Auto-advance carousel
                    setInterval(() => {
                        if (this.carouselItems && this.carouselItems.length > 0) {
                            this.currentCarouselIndex = (this.currentCarouselIndex + 1) % this.carouselItems.length;
                            this.renderCarouselItem();
                        }
                    }, 8000);
                },

                updateCarouselDots() {
                    const dotsContainer = document.getElementById('carouselDots');
                    if (!dotsContainer || !this.carouselItems) return;

                    dotsContainer.innerHTML = '';

                    this.carouselItems.forEach((_, index) => {
                        const dot = document.createElement('button');
                        dot.className = `w-2 h-2 rounded-full transition-all duration-300 ${index === this.currentCarouselIndex
                            ? 'bg-purple-500 w-8'
                            : 'bg-gray-500 hover:bg-gray-400'
                            }`;
                        dot.onclick = () => {
                            this.currentCarouselIndex = index;
                            this.renderCarouselItem();
                        };
                        dotsContainer.appendChild(dot);
                    });
                },

                toggleWatchLater(item) {
                    const index = this.watchLaterItems.findIndex(i => i.id === item.id);
                    if (index === -1) {
                        this.watchLaterItems.push({
                            ...item,
                            type: this.currentTab === 'movies' ? 'movie' : 'tv'
                        });
                    } else {
                        this.watchLaterItems.splice(index, 1);
                    }
                    this.watchLaterCount = this.watchLaterItems.length;
                    localStorage.setItem('watchLater', JSON.stringify(this.watchLaterItems));
                },

                isInWatchLater(item) {
                    return this.watchLaterItems.some(i => i.id === item.id);
                },

                clearWatchLater() {
                    this.showClearConfirm = true;
                },

                doClearWatchLater() {
                    this.watchLaterItems = [];
                    this.watchLaterCount = 0;
                    localStorage.setItem('watchLater', JSON.stringify([]));
                    this.showClearConfirm = false;
                },

                changeLanguage(newLanguage) {
                    this.language = newLanguage;
                    localStorage.setItem('selectedLanguage', newLanguage);
                    this.fetchTop10Content();
                }
            }
        }
    </script>
    <button @click="window.scrollTo({top: 0})" @scroll.window="showScrollTop = window.pageYOffset > 500"
        x-data="{ showScrollTop: false }" x-show="showScrollTop" x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 transform translate-y-10"
        x-transition:enter-end="opacity-100 transform translate-y-0"
        x-transition:leave="transition ease-in duration-300"
        x-transition:leave-start="opacity-100 transform translate-y-0"
        x-transition:leave-end="opacity-0 transform translate-y-10"
        class="fixed bottom-8 right-8 brand-gradient text-white rounded-full p-4 shadow-lg cursor-pointer transition-all duration-300 hover:scale-110 z-50 floating-button">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
        </svg>
    </button>

    <script>
        document.querySelector('.search-container input').addEventListener('mousemove', (e) => {
            const container = e.target.parentElement;
            const rect = container.getBoundingClientRect();
            const x = ((e.clientX - rect.left) * 100) / rect.width;
            const y = ((e.clientY - rect.top) * 100) / rect.height;
            container.style.setProperty('--mouse-x', x + '%');
            container.style.setProperty('--mouse-y', y + '%');
        });
    </script>
    <script>
        window.addEventListener('appearance-changed', () => {
            const particlesEl = document.getElementById('particles-js');
            if (localStorage.getItem('showParticles') === 'false') {
                particlesEl.style.display = 'none';
            } else {
                particlesEl.style.display = 'block';
            }
        });
    </script>

    <script>
        // Store app instance globally for access from dynamically created elements
        let appInstance = null;

        document.addEventListener('alpine:init', () => {
            // Store the app instance globally when Alpine initializes
            setTimeout(() => {
                const bodyElement = document.querySelector('[x-data]');
                if (bodyElement && bodyElement._x_dataStack) {
                    appInstance = bodyElement._x_dataStack[0];
                    window.appInstance = appInstance;
                }
            }, 100);
        });

        // Fallback function for watch later toggle
        window.toggleWatchLaterWithFeedback = function (buttonElement, item) {
            if (window.appInstance) {
                window.appInstance.toggleWatchLater(item);

                // Visual feedback
                const svg = buttonElement.querySelector('svg');
                const isAdded = window.appInstance.isInWatchLater(item);

                if (isAdded) {
                    svg.setAttribute('fill', 'currentColor');
                    buttonElement.classList.add('watchlist-btn-added');
                } else {
                    svg.setAttribute('fill', 'none');
                    buttonElement.classList.remove('watchlist-btn-added');
                }
            }
        };
    </script>
    <script>
        // Continue Watching Functionality
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize continue watching array from localStorage
            let continueWatchingItems = JSON.parse(localStorage.getItem('continueWatching')) || [];
            const continueWatchingSection = document.getElementById('continueWatchingSection');
            const continueWatchingGrid = document.getElementById('continueWatchingGrid');
            const clearContinueWatchingBtn = document.getElementById('clearContinueWatching');

            // Display continue watching section if there are items
            function updateContinueWatchingSection() {
                if (continueWatchingItems.length > 0) {
                    continueWatchingSection.style.display = 'block';
                    renderContinueWatchingItems();
                } else {
                    continueWatchingSection.style.display = 'none';
                }
            }

            // Render continue watching items
            function renderContinueWatchingItems() {
                continueWatchingGrid.innerHTML = '';

                continueWatchingItems.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'relative card-hover';
                    itemElement.innerHTML = `
                    <a href="watch.html?id=${item.id}&type=${item.type}" class="block rounded-lg overflow-hidden bg-gray-800 aspect-[2/3] border border-purple-500/10">
                        <div class="relative h-full">
                            <img src="https://image.tmdb.org/t/p/w500${item.poster_path}" 
                                alt="${item.title || item.name}" 
                                class="w-full h-full object-cover" 
                                onerror="this.src='/logo.png'; this.classList.remove('object-cover'); this.classList.add('object-contain');" />
                            <div class="card-overlay absolute inset-0 flex flex-col justify-end p-2 sm:p-3 md:p-4">
                                <h3 class="text-sm md:text-lg font-semibold">${item.title || item.name}</h3>
                                <p class="text-gray-400 text-xs md:text-sm mt-1">⭐ ${item.vote_average || 'N/A'}/10</p>
                                <p class="text-purple-400 text-xs mt-1">Continue watching</p>
                            </div>
                        </div>
                    </a>
                    <button class="remove-continue-watching absolute top-2 right-2 p-1.5 md:p-2 bg-gray-900 bg-opacity-75 rounded-full hover:bg-red-600 transition-all duration-300 text-white" data-id="${item.id}">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 md:h-5 md:w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                `;
                    continueWatchingGrid.appendChild(itemElement);
                });

                // Add event listeners to remove buttons
                document.querySelectorAll('.remove-continue-watching').forEach(button => {
                    button.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        const itemId = parseInt(this.getAttribute('data-id'));
                        removeFromContinueWatching(itemId);
                    });
                });
            }

            // Add item to continue watching
            function addToContinueWatching(item) {
                // Check if item already exists
                const existingIndex = continueWatchingItems.findIndex(i => i.id === item.id);

                // If exists, remove it so we can add it to the front
                if (existingIndex !== -1) {
                    continueWatchingItems.splice(existingIndex, 1);
                }

                // Add item to the beginning of the array
                continueWatchingItems.unshift({
                    id: item.id,
                    title: item.title || item.name,
                    name: item.name || item.title,
                    poster_path: item.poster_path,
                    vote_average: item.vote_average,
                    type: item.type || (app().currentTab === 'movies' ? 'movie' : 'tv')
                });

                // Limit to 10 items
                if (continueWatchingItems.length > 10) {
                    continueWatchingItems = continueWatchingItems.slice(0, 10);
                }

                // Save to localStorage
                localStorage.setItem('continueWatching', JSON.stringify(continueWatchingItems));

                // Update the UI
                updateContinueWatchingSection();
            }

            // Remove item from continue watching
            function removeFromContinueWatching(itemId) {
                continueWatchingItems = continueWatchingItems.filter(item => item.id !== itemId);
                localStorage.setItem('continueWatching', JSON.stringify(continueWatchingItems));
                updateContinueWatchingSection();
            }

            // Clear all continue watching items
            clearContinueWatchingBtn.addEventListener('click', function () {
                continueWatchingItems = [];
                localStorage.setItem('continueWatching', JSON.stringify(continueWatchingItems));
                updateContinueWatchingSection();
            });

            // Add click event listeners to all content cards
            document.addEventListener('click', function (e) {
                // Find the closest card-hover parent if clicked on a child element
                const cardElement = e.target.closest('.card-hover');
                if (cardElement) {
                    const linkElement = cardElement.querySelector('a');
                    if (linkElement && linkElement.href.includes('watch.html')) {
                        // Extract item data
                        const item = {};

                        // Get ID and type from the URL
                        const url = new URL(linkElement.href);
                        item.id = parseInt(url.searchParams.get('id'));
                        item.type = url.searchParams.get('type');

                        // Get other data from the card
                        const titleElement = cardElement.querySelector('h3');
                        item.title = titleElement ? titleElement.textContent : '';

                        const ratingElement = cardElement.querySelector('.text-gray-400');
                        item.vote_average = ratingElement ?
                            parseFloat(ratingElement.textContent.replace('⭐ ', '').split('/')[0]) :
                            0;

                        const imgElement = cardElement.querySelector('img');
                        if (imgElement && imgElement.src.includes('image.tmdb.org')) {
                            item.poster_path = imgElement.src.split('w500')[1];
                        } else {
                            item.poster_path = '/logo.png';
                        }

                        // Add to continue watching
                        addToContinueWatching(item);
                    }
                }
            });

            // Initialize on page load
            updateContinueWatchingSection();
        });

        // Fixed scrollGenreResults function
        function scrollGenreResults(direction) {
            const container = document.getElementById('genreResultsGrid');
            if (!container) return;

            const scrollAmount = direction === 'left' ? -300 : 300;
            container.scrollBy({
                left: scrollAmount,
                behavior: 'smooth'
            });
        }

        // Enhanced and fixed scrollSection function
        function scrollSection(containerId, direction) {
            console.log(`Scrolling: ${containerId} in direction: ${direction}`);

            const container = document.getElementById(containerId);
            if (!container) {
                console.error(`Container not found: ${containerId}`);
                return;
            }

            // Ensure container has proper scroll setup
            container.style.display = 'flex';
            container.style.overflowX = 'auto';
            container.style.scrollBehavior = 'smooth';

            // Calculate scroll amount based on container width
            const scrollAmount = direction === 'left' ? -container.offsetWidth * 0.8 : container.offsetWidth * 0.8;

            // Perform the scroll
            container.scrollBy({
                left: scrollAmount,
                behavior: 'smooth'
            });

            console.log(`Scrolled by: ${scrollAmount}px`);
        }

        // Initialize scroll containers on DOM load
        document.addEventListener('DOMContentLoaded', function () {
            // Ensure all scroll containers are properly configured
            const scrollContainers = document.querySelectorAll('.scroll-container');
            scrollContainers.forEach(container => {
                container.style.display = 'flex';
                container.style.flexWrap = 'nowrap';
                container.style.overflowX = 'auto';
                container.style.scrollBehavior = 'smooth';
                container.style.WebkitOverflowScrolling = 'touch';
                container.style.scrollbarWidth = 'none';
                container.style.msOverflowStyle = 'none';
            });

            // Add stagger animation to cards
            const cards = document.querySelectorAll('.card-hover');
            cards.forEach((card, index) => {
                card.style.setProperty('--stagger', index);
                card.classList.add('stagger-animation');
            });
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const animation = lottie.loadAnimation({
                container: document.getElementById('lottie-animation'),
                renderer: 'svg',
                loop: true,
                autoplay: true,
                path: 'Animation - 1748423844454.json' // Ensure this path matches your actual file location
            });

            // Automatically hide loader after a delay
            setTimeout(() => {
                document.getElementById('lottie-loader').style.display = 'none';
            }, 2000); // Adjust time as needed
        });
    </script>

</body>

</html>